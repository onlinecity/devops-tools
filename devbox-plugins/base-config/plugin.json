{
  "name": "base-config",
  "version": "1.1.0",
  "description": "Base devbox config for OC DevOps projects",
  "packages":[
    "python@3.10",
    "tfswitch@1.0.0",
    "pre-commit@3.6.2",
    "yamllint@1.35.1",
    "tflint@0.50.3",
    "cowsay@3.7.0",
    "go-task@3.35.1"
  ],
  "env": {},
  "create_files": {
    "{{ .Virtenv }}/.envrc.private.example": "config/.envrc.private.example",
    "{{ .Virtenv }}/envrc-private.direnv": "config/envrc-private.direnv",
    "{{ .Virtenv }}/pre-commit-config.yaml": "config/pre-commit-config.yaml",
    "{{ .Virtenv }}/version.txt": "../../version.txt"
  },
  "shell": {
    "init_hook": [
      "echo \"base-config plugin loaded version `cat {{ .Virtenv }}/version.txt`\"",
      ". $VENV_DIR/bin/activate",
      "if [ -f requirements.txt ];then pip install -r requirements.txt;fi",
      "if [ -f .pre-commit-config.yaml ];then pre-commit install;fi"
    ],
     "scripts": {
      "bootstrap-envrc-private": [
        "echo 'Bootstrapping .envrc.private'",
        "cp {{ .Virtenv }}/.envrc.private.example ./",
        "cat {{ .Virtenv }}/envrc-private.direnv >> ./.envrc",
        "echo 'Bootstrapping done'"
      ],
      "bootstrap-pre-commit": [
        "echo 'Bootstrapping pre-commit'",
        "cp {{ .Virtenv }}/pre-commit-config.yaml .pre-commit-config.yaml",
        "echo 'Bootstrapping done'"
      ]
     } 
  },
  "include": []
}